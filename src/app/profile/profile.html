<div class="page-wrap">
  <mat-card class="pink-card profile-card">
    <div class="header">
      <div>
        <h2 class="title">Profile</h2>
        <p class="subtitle muted">Your account + team memberships</p>
      </div>
    </div>

    @if (vm$ | async; as vm) {

      <div class="info-grid">
        <div class="info">
          <div class="label">Logged in as</div>
          <div class="value">{{ vm.username }}</div>
        </div>

        <div class="info">
          <div class="label">Email</div>
          <div class="value">{{ vm.email || '—' }}</div>
        </div>

        <div class="info">
          <div class="label">JWT System Role</div>
          <div class="value">
            <span class="pill" [class.pill-owner]="vm.jwtSystemRole === 'Admin'">
              {{ vm.jwtSystemRole }}
            </span>
          </div>
        </div>

        <div class="info">
          <div class="label">Team Role</div>
          <div class="value">
            <span class="pill" [class.pill-owner]="vm.teamRole === 'Owner'">
              {{ vm.teamRole }}
            </span>
          </div>
        </div>
      </div>

      <div class="section">
        <h3 class="section-title">Teams</h3>

        @if (vm.teams.length > 0) {
          <mat-list class="team-list">
            @for (t of vm.teams; track t.teamId) {
              <mat-list-item class="team-item">
                <div class="team-row">
                  <div class="team-name">{{ t.name }}</div>
                  <span class="pill pill-neutral" [class.pill-owner]="(t.myRole || '').toLowerCase() === 'owner'">
                    {{ t.myRole }}
                  </span>
                </div>
              </mat-list-item>
            }
          </mat-list>
        } @else {
          <p class="muted">None</p>
        }
      </div>

    } @else {
      <p class="muted">Loading profile…</p>
    }
  </mat-card>
</div>
